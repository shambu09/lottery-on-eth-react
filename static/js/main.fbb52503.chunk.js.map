{"version":3,"sources":["web3.js","lottery.js","App.js","index.js"],"names":["connect","a","enabled","error","web3","accounts","window","ethereum","request","method","Web3","abi","constant","inputs","name","outputs","payable","stateMutability","type","getContract","eth","Contract","App","useState","isEnabled","web3Con","lottery","manager","account","balance","players","value","message","state","setState","canTransact","setCanTransact","useEffect","handleAccountsChange","console","log","location","reload","handleChainChange","chainId","_setContractDetails","methods","call","getBalance","options","address","getPlayers","prevState","then","on","setListeners","removeListener","removeListeners","e","onSubmit","event","preventDefault","Enter","send","from","utils","toWei","onPickWinner","pickWinner","className","id","length","fromWei","onChange","target","disabled","toLowerCase","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fbb52503.chunk.js","sourcesContent":["import Web3 from \"web3\";\n\nconst connect = async () => {\n\tlet enabled = false;\n\tlet error = null;\n\tlet web3 = null;\n\tlet accounts = null;\n\n\ttry {\n\t\taccounts = await window.ethereum.request({\n\t\t\tmethod: \"eth_requestAccounts\",\n\t\t});\n\t\tweb3 = new Web3(window.ethereum);\n\t\tenabled = true;\n\t} catch (e) {\n\t\terror = e;\n\t}\n\treturn { accounts, web3, enabled, error };\n};\n\nconst getWeb3 = () => {\n\treturn new Web3(window.ethereum);\n};\n\nconst setListeners = (handleAccountsChange, handleChainChange) => {\n\twindow.ethereum.on(\"accountsChanged\", handleAccountsChange);\n\twindow.ethereum.on(\"chainChanged\", handleChainChange);\n};\n\nconst removeListeners = (handleAccountsChange, handleChainChange) => {\n\twindow.ethereum.removeListener(\"accountsChanged\", handleAccountsChange);\n\twindow.ethereum.removeListener(\"chainChanged\", handleChainChange);\n};\n\nexport { connect, getWeb3, setListeners, removeListeners };\n","const abi = [\n\t{\n\t\tconstant: false,\n\t\tinputs: [],\n\t\tname: \"Enter\",\n\t\toutputs: [],\n\t\tpayable: true,\n\t\tstateMutability: \"payable\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [],\n\t\tname: \"manager\",\n\t\toutputs: [{ name: \"\", type: \"address\" }],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: false,\n\t\tinputs: [],\n\t\tname: \"pickWinner\",\n\t\toutputs: [],\n\t\tpayable: false,\n\t\tstateMutability: \"nonpayable\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [],\n\t\tname: \"getPlayers\",\n\t\toutputs: [{ name: \"\", type: \"address[]\" }],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tconstant: true,\n\t\tinputs: [{ name: \"\", type: \"uint256\" }],\n\t\tname: \"players\",\n\t\toutputs: [{ name: \"\", type: \"address\" }],\n\t\tpayable: false,\n\t\tstateMutability: \"view\",\n\t\ttype: \"function\",\n\t},\n\t{\n\t\tinputs: [],\n\t\tpayable: false,\n\t\tstateMutability: \"nonpayable\",\n\t\ttype: \"constructor\",\n\t},\n];\nconst address = \"0xc1fe31c3c9772cf7f1cc7e24e280d1b9e27f1950\";\n\nconst getContract = (web3) => {\n\treturn new web3.eth.Contract(abi, address);\n};\n\nexport default getContract;\n","import \"./App.css\";\n\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\n\nimport { connect, setListeners, removeListeners } from \"./web3\";\nimport Web3 from \"web3\";\nimport getContract from \"./lottery\";\n\nfunction App() {\n\tconst [state, setState] = useState({\n\t\tisEnabled: false,\n\t\tweb3Con: null,\n\t\tlottery: null,\n\t\tmanager: null,\n\t\taccount: null,\n\t\tbalance: \"\",\n\t\tplayers: [],\n\t\tvalue: \"\",\n\t\tmessage: \"\",\n\t});\n\tconst [canTransact, setCanTransact] = useState(true);\n\n\tuseEffect(() => {\n\t\tconst handleAccountsChange = (accounts) => {\n\t\t\tconsole.log(\"Accounts Changed\");\n\t\t\twindow.location.reload();\n\t\t};\n\n\t\tconst handleChainChange = (chainId) => {\n\t\t\tconsole.log(\"Chain Changed\");\n\t\t\twindow.location.reload();\n\t\t};\n\n\t\tconst _setContractDetails = async (lottery, web3) => {\n\t\t\tconst manager = await lottery.methods.manager().call();\n\t\t\tconst balance = await web3.eth.getBalance(lottery.options.address);\n\t\t\tconst players = await lottery.methods.getPlayers().call();\n\n\t\t\tsetState((prevState) => {\n\t\t\t\treturn { ...prevState, manager, balance, players };\n\t\t\t});\n\t\t};\n\n\t\tconnect().then(({ accounts, web3, enabled, error }) => {\n\t\t\tif (enabled) {\n\t\t\t\tconsole.log(\"Connected to Metamask\");\n\t\t\t\tsetListeners(handleAccountsChange, handleChainChange);\n\n\t\t\t\tsetState((prevState) => {\n\t\t\t\t\tconst lottery = getContract(web3);\n\t\t\t\t\t_setContractDetails(lottery, web3);\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\tisEnabled: enabled,\n\t\t\t\t\t\tweb3Con: web3,\n\t\t\t\t\t\tlottery: lottery,\n\t\t\t\t\t\taccount: accounts[0],\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Error connecting to Metamask, Traceback: \");\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t});\n\n\t\t// Component Cleanup function -> Removes listeners from the metamask provider instance.\n\t\treturn () => {\n\t\t\ttry {\n\t\t\t\tremoveListeners(handleAccountsChange, handleChainChange);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"Unable To Remove Listeners or No Listners at all, TraceBack: \"\n\t\t\t\t);\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t};\n\t}, []);\n\n\tconst onSubmit = async (event) => {\n\t\tevent.preventDefault();\n\t\tsetCanTransact(false);\n\t\tconst account = state.account;\n\n\t\tsetState((prevState) => {\n\t\t\treturn {\n\t\t\t\t...prevState,\n\t\t\t\tmessage: \"Waiting on transaction success...\",\n\t\t\t};\n\t\t});\n\n\t\ttry {\n\t\t\tawait state.lottery.methods.Enter().send({\n\t\t\t\tfrom: account,\n\t\t\t\tvalue: Web3.utils.toWei(state.value, \"ether\"),\n\t\t\t});\n\n\t\t\tconst balance = await state.web3Con.eth.getBalance(\n\t\t\t\tstate.lottery.options.address\n\t\t\t);\n\t\t\tconst players = await state.lottery.methods.getPlayers().call();\n\n\t\t\tsetState((prevState) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tplayers,\n\t\t\t\t\tmessage: \"You have entered the lottery pool!\",\n\t\t\t\t\tbalance: balance,\n\t\t\t\t};\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(\"Error: \");\n\t\t\tconsole.log(e);\n\t\t}\n\t\tsetCanTransact(true);\n\t};\n\n\tconst onPickWinner = async (event) => {\n\t\tevent.preventDefault();\n\t\tsetCanTransact(false);\n\t\tconst account = state.account;\n\n\t\tsetState((prevState) => {\n\t\t\treturn {\n\t\t\t\t...prevState,\n\t\t\t\tmessage: \"Waiting on transaction success...\",\n\t\t\t};\n\t\t});\n\n\t\ttry {\n\t\t\tawait state.lottery.methods.pickWinner().send({\n\t\t\t\tfrom: account,\n\t\t\t});\n\n\t\t\tsetState((prevState) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tmessage: \"A winner has been picked!\",\n\t\t\t\t};\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(\"Error: \");\n\t\t\tconsole.log(e);\n\t\t}\n\t\tsetCanTransact(true);\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<div className=\"Account-info\">\n\t\t\t\t<div>\n\t\t\t\t\t<h4 id=\"Account-info-item1\">\n\t\t\t\t\t\tAccount :{\" \"}\n\t\t\t\t\t\t{state.account ? state.account : \"Not Initialized\"}\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h4 id=\"Account-info-item2\">\n\t\t\t\t\t\t{state.isEnabled\n\t\t\t\t\t\t\t? \"Connected to Metamask\"\n\t\t\t\t\t\t\t: \"Not Connected to Metamask\"}\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"Contract\">\n\t\t\t\t<h2>Lottery Contract</h2>\n\n\t\t\t\t<div className=\"Contract-details\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThis contract is managed by{\" \"}\n\t\t\t\t\t\t{state.manager ? state.manager : \"No Manager\"}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThere are currently {state.players.length} people\n\t\t\t\t\t\tentered, competing to win{\" \"}\n\t\t\t\t\t\t{Web3.utils.fromWei(state.balance, \"ether\")} ether!\n\t\t\t\t\t</p>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t\t\t<h3>Want to try your luck?</h3>\n\t\t\t\t\t\t<div className=\"input\">\n\t\t\t\t\t\t\t<label>Amount of ether to enter : </label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tvalue={state.value}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\tsetState((prevState) => {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\t\t\t\t\tvalue: e.target.value,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button className=\"btn\" disabled={!canTransact}>\n\t\t\t\t\t\t\tEnter\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t\t{state.manager &&\n\t\t\t\t\tstate.account &&\n\t\t\t\t\tstate.manager.toLowerCase() ===\n\t\t\t\t\t\tstate.account.toLowerCase() ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h4>Time to pick a winner?</h4>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={onPickWinner}\n\t\t\t\t\t\t\t\t\tdisabled={!canTransact}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tPick Winner\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t)}\n\t\t\t\t\t<h1>{state.message}</h1>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}